<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link href='https://fonts.googleapis.com/css?family=Libre Baskerville' rel='stylesheet'>
    <title>Account recovery</title>
    <style>
        span,h1,#emailSubmit,#afterCode,#codeSubmit,#changePassSubmit{
            font-family: 'Libre Baskerville',serif;
            color: white;
        }
        div#container,div#passCont{
            background-color: #1b1c24;
            border-radius: 35pt;
            width:500px;
            height: 300px;
            position: absolute;
            left: 35%;
            top: 20%;
            transition: height 0.5s ease, opacity 0.5s ease, visibility 0.5s ease;
        }
        .taller{
            height: 500px;
        }
        .hidden{
            opacity: 1;
        }
        h1{
            font-size: 35px;
        }
        body{
            background-image: url("images/pexels-valeriya-1639562.jpg");
            background-size: 100%;
            background-repeat: no-repeat;
            scroll-behavior: smooth;
        }
        #emailEnter{
            font-size: 14px;
            display: block;
            text-align: left;
            padding-left: 40px;
        }

        #emailTxt,#newPassTxt,#confirmPassTxt{
            font-size: 20px;
            margin-left: -10px;
        }

        #formContainer{
            padding-top: 30px;
            padding-left: 30px;
        }
        #UserEmail,#UserCode,#newPass,#confirmPass{
            width: 70%;
            height: 30px;
            border-radius: 7px;
        }
        #emailSubmit,#codeSubmit,#changePassSubmit{
            margin-top: 10px;
            width: 100px;
            height: 50px;
            border-radius: 7px;
            background-color: rgb(35, 37, 46);
            border: 1px solid gray;
        }
        #changePassSubmit{
            display: block;
            width: 150px;
            margin-top: 20px;
        }
        #emailSubmit:hover,#codeSubmit:hover,#changePassSubmit:hover{
            cursor: pointer;
            background-color: rgb(67, 69, 79);
        }
        #emailSubmit:active,#codeSubmit:active,#changePassSubmit:active{
            color: black;
            background-color: white;
        }
        #afterCode{
            visibility: hidden;
            opacity: 0;
            padding-top: 20px;
            font-size: 20px;
            margin-left: -10px;
            transition: opacity 1s ease, visibility 1s ease;
        }
        .showSlower{
            opacity: 1;
        }
        #passCont{
            visibility: hidden;
            opacity: 0;
            transition: visibility 0.5s ease, opacity 0.5s ease;
        }
        .showPass{
            opacity: 1;
        }
    #newPassTxt{
        display: block;
    }

    </style>
    <script>

        function sendCode(eValue){
            /*code to send the code :D*/

            showAfterCode();
        }
        function showAfterCode(){
            if( document.getElementById("UserEmail").value !== ""){
                document.getElementById("container").style.height="500px";
                document.getElementById("afterCode").style.visibility="visible";
                document.getElementById("afterCode").style.opacity="1";
            }else{
                window.alert("Please enter a valid email address first!")
            }
        }
        function checkCode(cValue){
            /*Checking functionality*/


        showNewPass(cValue);
        }

        function showNewPass(c){
            let isNum = /^\d+$/.test(c);
            if(c !== "" && isNum && c.length === 6){
                document.getElementById("container").style.opacity="0";

                document.getElementById("container").style.visibility="hidden";
                document.getElementById("afterCode").style.visibility="hidden";

                document.getElementById("passCont").style.opacity="1";
                document.getElementById("passCont").style.visibility="visible";
                document.getElementById("passCont").style.height="350px";

            }else{
                window.alert("Please enter a valid code!")
            }

        }
        function checkPass(){
            let newPass = document.getElementById("newPass").value;
            let confirmPass = document.getElementById("confirmPass").value;

            if(newPass === "" && confirmPass === ""){
                window.alert("Please enter a new password and confirm it!")
            }else{
                if(newPass === confirmPass){

                    changePass(newPass);

                    window.alert("Password changed successfully!\nRedirecting you to login page!");
                    window.close();
                    window.open("index.html");
                }else{
                    window.alert("Please enter the same values for both field!");
                }
            }
        }
        function changePass(p){
            /*code to change password*/




        }
    </script>
</head>
<body>
<div id="container" align="center" class="taller hidden">
    <h1>Account recovery</h1>
    <span id="emailEnter">Please enter a valid email address below to send you a verification code</span>
    <div id="formContainer">
        <form action="forgot%20account%20page.html" method="post">
            <span id="emailTxt">Email:&nbsp</span><input type="text" id="UserEmail" placeholder="enter your email here..." maxlength="30" required>
            <input type="button" id="emailSubmit" value="Send code" onclick='sendCode(document.getElementById("UserEmail").value)'>
            <div id="afterCode" class="showSlower hidden">
                    <span id="codeTxt">code was sent successfully!<br><br>Code:&nbsp</span><input type="password" id="UserCode" placeholder="enter the code we sent you here..." pattern="[0-9]{6}" minlength="6" maxlength="6" required>
                    <input type="button" id="codeSubmit" value="Submit code" onclick='checkCode(document.getElementById("UserCode").value)'>
            </div>
        </form>
    </div>
</div>
<div id="passCont" align="center" class="showPass">
    <h1 style="font-size: 30px">Create new password</h1>
    <form action="forgot%20account%20page.html" method="post">
        <span id="newPassTxt">New Password</span><input type="password" id="newPass" placeholder="enter your new password here..." required>
        <br><br><br>
        <span id="confirmPassTxt">Confirm new Password</span><input type="password" id="confirmPass" placeholder="re-enter your new password here..." required>
        <input type="button" id="changePassSubmit" value="Change password" onclick='checkPass(document.getElementById("newPass").value)'>
    </form>

</div>


</body>
</html>